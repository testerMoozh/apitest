<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <title>Chariot - Urban Observatory</title>
    <link rel="stylesheet" href="stylesheets/submit.css" />
</head>
<body>

    <div class="sidenav" style="background-color: #797986;"></div>
    <div class="rowone">
        <div class="columnone" style="background-color: lightslategrey">
            <!-- multistep form -->

            <div class="container">
                <section class="contact-form">
                    <h1>Submit Your API</h1>
                    <p>Use this form to submit your API specifications and endpoints</p>

                    <form id="testForm" action="javascript:test()">
                        <d1 class="input-group">
                            <dd><label for="1">API Name:</label></dd>
                            <dt><input id="1" name="submittedapi.info.name" type="text" /></dt>
                        </d1>
                        <dl>
                            <dt>Spec:</dt>
                            <dd><label><input type="radio" name="submittedapi.openapi" id="spec" value="OpenAPI 2.0.0" style="display: inline" /> OpenAPI v2</label></dd>
                            <dd><label><input type="radio" name="submittedapi.openapi" id="spec" value="OpenAPI 3.0.0" style="display: inline" /> OpenAPI v3</label></dd>
                        </dl>
                        <d1 class="input-group">
                            <dd><label for="2">API Version:</label></dd>
                            <dt><input id="2" name="submittedapi.info.verison" type="text" /></dt>
                        </d1>
                        <d1 class="input-group">
                            <dd><label for="3">Description:</label></dd>
                            <dt><input id="3" name="submittedapi.info.description" type="text" placeholder="short description" /></dt>
                        </d1>
                        <dl>
                            <dt></dt>
                            <dd><input type="submit" /></dd>
                        </dl>
                    </form>
                </section>

                <div class="results">
                    <h2>Form Data</h2>
                    <pre><code id="testArea">
                    </code></pre>
                </div>
            </div>
        </div>
        <div class="columnone" style="background-color: lightgrey">

            <div class="container">
                <div class="text-area">
                    <header>
                        <p style="color:#009933;">{</p>
                        <p style="display: inline; margin-left:15px; color:#009933;">openapi: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="margin-left: 15px; color:#009933;">info: { </p>
                        <p style="display: inline; margin-left:50px; color:#009933;">title: <div id="a" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">version: <div id="b" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">description: <div id="c" data-text="" style="display: inline"></div>,</p>
                        <p style="margin-left:50px; color:#009933;">contact: { </p>
                        <p style="display: inline; margin-left:100px; color:#009933;">name: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:100px; color:#009933;">email: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="margin-left:50px; color:#009933;">}</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">terms of service: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="margin-left:50px; color:#009933;">license: {</p>
                        <p style="display: inline; margin-left:100px; color:#009933;">name: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="margin-left:50px; color:#009933;">}</p>
                        <p style="margin-left: 15px; color:#009933;">servers: [ </p>
                        <p style="margin-left:50px; color:#009933;">{</p>
                        <p style="display: inline; margin-left:70px; color:#009933;">url: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:70px; color:#009933;">description: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="margin-left:50px; color:#009933;">}</p>
                        <p style="margin-left: 15px; color:#009933;">] </p>
                        <p style="margin-left: 15px; color:#009933;">paths: { </p>
                        <p style="margin-left: 35px; color:#009933;">url: { </p>
                        <p style="margin-left: 50px; color:#009933;">parameters: [ </p>
                        <p style="margin-left:60px; color:#009933;">{</p>
                        <p style="margin-left:70px; color:#009933;">schema: {</p>
                        <p style="display: inline; margin-left:100px; color:#009933;">type: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="margin-left:70px; color:#009933;">},</p>
                        <p style="display: inline; margin-left:70px; color:#009933;">name: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:70px; color:#009933;">in: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="display: inline; margin-left:70px; color:#009933;">required: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:70px; color:#009933;">description: <div id="" data-text="" style="display: inline"></div></p>
                        <p style="margin-left:60px; color:#009933;">}</p>
                        <p style="margin-left: 50px; color:#009933;">]</p>
                        <p style="margin-left: 50px; color:#009933;">get: {</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">summary <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">tags:[ </p><div id="" data-text="" style="display: inline"></div><p style="margin-left:50px; color:#009933;">],</p>
                        <p style="display: inline; margin-left:50px; color:#009933;">responses: <div id="" data-text="" style="display: inline"></div>,</p>
                        <p style="margin-left:70px; color:#009933;">200: {}</p>
                        <p style="margin-left:70px; color:#009933;">400: {}</p>
                        <p style="margin-left: 15px; color:#009933;">} </p>
                    </header>
                </div>
            </div>
        </div>
    </div>

</body>
<script type="text/javascript" src="/javascripts/skrollr.min.js"></script>
<script type="text/javascript">

    (() => {
        var inputs = ["1", "2", "3"];
        var outputs = ["a", "b", "c"];
        var length = inputs.length;

        for (var i = 0; i < length; i++) {
            const jsTextBlock = document.getElementById(outputs[i]),
                jsTextInput = document.getElementById(inputs[i]);

            if (jsTextInput.value.length === 0) {
                jsTextBlock.innerHTML = '';
            }

            jsTextInput.addEventListener('input', () => {
                jsTextBlock.setAttribute('data-text', jsTextInput.value);

                jsTextBlock.innerHTML = jsTextBlock.getAttribute('data-text');

                if (jsTextInput.value.length === 0) {
                    jsTextBlock.innerHTML = 'Empty';
                }
            });
        }
    })();

</script>
<script type="text/javascript" src="javascripts/form2js.js"></script>
<script type="text/javascript" src="javascripts/json2.js"></script>
<script type="text/javascript">
    function test() {
        var formData = form2js('testForm', '.', true,
            function (node) {
                if (node.id && node.id.match(/callbackTest/)) {
                    return { name: node.id, value: node.innerHTML };
                }
            });
        console.log(formData);
        document.getElementById('testArea').innerHTML = JSON.stringify(formData, null, '\t');
    }
</script>
</html>
